<Window x:Class="NMC.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:local="clr-namespace:NMC"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        Title="NarakaModelExtractor - V1.0.0"
        Width="1280"
        Height="720"
        Icon="/Resources/Icon.ico"
        ThemeMode="Dark"
        mc:Ignorable="d">

    <d:Window.DataContext>
        <local:MainViewModel />
    </d:Window.DataContext>

    <Grid>
        <MediaElement Name="backgroundVideo"
                      Source="Assets/Background/background.mp4"
                      LoadedBehavior="Play"
                      UnloadedBehavior="Manual"
                      IsHitTestVisible="False"
                      Stretch="UniformToFill"
                      MediaEnded="backgroundVideo_MediaEnded" />

        <Rectangle Fill="#D0000000" />

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="1*" />
                <RowDefinition Height="1*" />
            </Grid.RowDefinitions>

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1*" />
                <ColumnDefinition Width="1*" />
                <ColumnDefinition Width="1*" />
            </Grid.ColumnDefinitions>

            <Grid Grid.Row="0"
                  Grid.Column="1"
                  Grid.ColumnSpan="2"
                  Margin="10,30,0,0">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <TextBox Grid.Column="0"
                         Margin="40,0,0,0"
                         Text="{Binding FrameAnalysis.FrameAnalysisPath}"
                         IsReadOnly="True"
                         Focusable="False" />

                <Button Grid.Column="1"
                        Margin="5,0"
                        Content="选择 FrameAnalysis 文件夹"
                        Style="{DynamicResource AccentButtonStyle}"
                        Command="{Binding SelectFrameAnalysisFolderCommand}" />
            </Grid>

            <Grid Grid.Row="1"
                  Grid.Column="1"
                  Grid.ColumnSpan="2"
                  Margin="10">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <TextBox Margin="40,10,0,0"
                         VerticalAlignment="Center"
                         IsReadOnly="True"
                         Focusable="False"
                         Text="{Binding Output.OutputPath}" />

                <Button Grid.Column="1"
                        Margin="5,10,0,0"
                        Content="选择输出文件夹"
                        Style="{DynamicResource AccentButtonStyle}"
                        Command="{Binding SelectOutputFolderCommand}" />
            </Grid>

            <Border Grid.RowSpan="3"
                    Grid.Column="0"
                    Margin="50,30,0,0"
                    BorderBrush="AliceBlue"
                    BorderThickness="1.5"
                    CornerRadius="2">

                <DataGrid AutoGenerateColumns="False"
                          CanUserAddRows="True"
                          CanUserReorderColumns="False"
                          CanUserResizeColumns="False"
                          CanUserSortColumns="False"
                          HeadersVisibility="Column"
                          IsReadOnly="False"
                          ItemsSource="{Binding DrawIBList}">

                    <DataGrid.Columns>
                        <DataGridTextColumn Width="*" Binding="{Binding IBHash}" Header="DrawIB">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="VerticalAlignment" Value="Center" />
                                    <Setter Property="Padding" Value="5,0,0,0" />
                                </Style>
                            </DataGridTextColumn.ElementStyle>

                            <DataGridTextColumn.EditingElementStyle>
                                <Style TargetType="TextBox">
                                    <Setter Property="VerticalContentAlignment" Value="Center" />
                                    <Setter Property="Padding" Value="5,0,0,0" />
                                </Style>
                            </DataGridTextColumn.EditingElementStyle>
                        </DataGridTextColumn>

                        <DataGridTextColumn Width="*" Binding="{Binding Alias}" Header="Alias">
                            <DataGridTextColumn.EditingElementStyle>
                                <Style TargetType="TextBox">
                                    <Setter Property="VerticalContentAlignment" Value="Center" />
                                    <Setter Property="Padding" Value="5,0,0,0" />
                                </Style>
                            </DataGridTextColumn.EditingElementStyle>

                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="VerticalAlignment" Value="Center" />
                                    <Setter Property="Padding" Value="5,0,0,0" />
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>

                    </DataGrid.Columns>
                </DataGrid>
            </Border>

            <Button Grid.Row="3"
                    Grid.Column="0"
                    Margin="50,35,0,0"
                    VerticalAlignment="Top"
                    Command="{Binding ExtractModelCommand}"
                    Content="提取模型"
                    ToolTip="点击以后会根据DrawIB列表去依次提取模型"
                    FontSize="15"
                    Style="{DynamicResource AccentButtonStyle}" />

            <Button Grid.Row="3"
                    Grid.Column="0"
                    Margin="50,0,0,160"
                    VerticalAlignment="Bottom"
                    Command="{Binding ClearDrawIBListCommand}"
                    Content="清空DrawIB列表"
                    ToolTip="点击以后会清空DrawIB列表"
                    FontSize="15"
                    Style="{DynamicResource AccentButtonStyle}" />

            <!--<CheckBox Grid.Row="3"
                      Grid.Column="0"
                      Margin="150,35,0,0"
                      VerticalAlignment="Top"
                      ToolTip="勾选后则会在提取时将贴图也提取出来"
                      IsEnabled="False"
                      Content="提取贴图 (暂时无法使用)"
                      FontSize="15" />-->
        </Grid>
    </Grid>
</Window>
